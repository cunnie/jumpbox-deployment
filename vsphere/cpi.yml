---
- type: replace
  path: /releases/-
  value:
    name: "bosh-vsphere-cpi"
    version: "50"
    url: "https://bosh.io/d/github.com/cloudfoundry-incubator/bosh-vsphere-cpi-release?v=50"
    sha1: "27cad6e254f363ac06f947b4def3cbc7bfa269b9"

- type: replace
  path: /resource_pools/name=vms/stemcell?
  value:
    url: https://bosh.io/d/stemcells/bosh-vsphere-esxi-ubuntu-xenial-go_agent?v=87.3
    sha1: b5287dff6d62e2debd2e32c5686648bc9671068f

# Configure sizes
- type: replace
  path: /resource_pools/name=vms/cloud_properties?
  value:
    cpu: 1
    ram: 1_024
    disk: 20_000

- type: replace
  path: /networks/name=private/subnets/0/cloud_properties?
  value: {name: ((network_name))}

# Add CPI job
- type: replace
  path: /cloud_provider/template?
  value:
    name: vsphere_cpi
    release: bosh-vsphere-cpi

- type: replace
  path: /cloud_provider/properties/vcenter?
  value:
    address: ((vcenter_ip))
    user: ((vcenter_user))
    password: ((vcenter_password))
    datacenters:
    - name: ((vcenter_dc))
      vm_folder: ((vcenter_vms))
      template_folder: ((vcenter_templates))
      datastore_pattern: ((vcenter_ds))
      persistent_datastore_pattern: ((vcenter_ds))
      disk_path: ((vcenter_disks))
      clusters:
      - ((vcenter_cluster)): {}
